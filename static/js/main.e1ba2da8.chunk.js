(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{47:function(e,t,n){e.exports=n.p+"static/media/logo.d6715342.svg"},56:function(e,t,n){e.exports=n(72)},61:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),l=n.n(c),i=n(14),s=n.n(i),u=(n(61),n(62),n(81)),E=n(82),m=n(18),d=n(6),f="https://emphasoft-test-assignment.herokuapp.com";!function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(a||(a={})),function(e){e.NOT_LOGGED_IN="NOT_LOGGED_IN",e.LOGIN_IN_PROGRESS="LOGIN_IN_PROGRESS",e.LOGIN_HAS_ERRORED="LOGIN_HAS_ERRORED",e.LOGIN_SUCCESSFUL="LOGIN_SUCCESSFUL"}(r||(r={})),function(e){e.NOT_FETCHED="NOT_FETCHED",e.FETCHING_IN_PROGRESS="FETCHING_IN_PROGRESS",e.FETCHING_HAS_ERRORED="FETCHING_HAS_ERRORED",e.FETCHED_SUCCESSFUL="FETCHED_SUCCESSFUL"}(o||(o={}));var p=n(47),h=n.n(p);function g(){var e=Object(d.c)((function(e){return e.login.loginStatus}));return l.a.createElement(u.a,{bg:"dark",variant:"dark",expand:"md"},l.a.createElement(m.LinkContainer,{to:"/",exact:!0},l.a.createElement(u.a.Brand,{href:"/"},l.a.createElement("img",{src:h.a,width:"150",height:"30",className:"d-inline-block align-top",alt:"React Bootstrap logo"}))),l.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(E.a,{className:"mr-auto"},l.a.createElement(m.LinkContainer,{to:"/users"},l.a.createElement(E.a.Link,{href:"#link"},"Users List"))),l.a.createElement(E.a,{className:"justify-content-end"},e===r.LOGIN_SUCCESSFUL?l.a.createElement(m.LinkContainer,{to:"/logout"},l.a.createElement(E.a.Link,{href:"#login"},"Logout")):l.a.createElement(m.LinkContainer,{to:"/login"},l.a.createElement(E.a.Link,{href:"#login"},"Login")))))}var S=n(22),v=n(5),O=n(74),N=n(75),b=n(76);function C(){var e=Object(d.c)((function(e){return e.login.loginStatus}));return l.a.createElement(O.a,{className:"min-vh-100 m-auto align-items-center"},l.a.createElement(N.a,{className:"text-center"},l.a.createElement("h1",{className:"display-3"},"Welcome To My SPA"),l.a.createElement("h2",{className:"lead"},"You can log in and see the list of users from the emphasoft backend"),e!==r.LOGIN_SUCCESSFUL?l.a.createElement(m.LinkContainer,{to:"/login"},l.a.createElement(b.a,null,"Login")):""))}var _=n(19),T=n(83),I=n(80),R=n(53),w=n(77);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:"LOGIN_ACTION",loginStatus:e,loginErrorMsg:t}}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"SET_USERS_ACTION",users:e,fetchStatus:t,fetchErrorMsg:n}}function k(e){return{type:"USER_TABLE_SORT_TYPE_ACTION",sortType:e}}var j=n(20),x=n.n(j),y=n(32),D=n(10);function A(e,t,n){(n=Object(D.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in n){a+="; "+r;var o=n[r];!0!==o&&(a+="="+o)}document.cookie=a}function F(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var U=function(){return function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(L(r.NOT_LOGGED_IN)),A("token","",{"max-age":-1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(y.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(G([],o.NOT_FETCHED)),F("token")){e.next=3;break}return e.abrupt("return",t(U()));case 3:return n=F("token"),t(G([],o.FETCHING_IN_PROGRESS)),a="".concat(f,"/api/v1/users/"),e.next=8,fetch(a,{headers:{Authorization:"Token ".concat(n)}}).then((function(e){if(!e.ok)throw t(G([],o.FETCHING_HAS_ERRORED,e.statusText)),new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){return t(G(e,o.FETCHED_SUCCESSFUL))})).catch((function(e){t(G([],o.FETCHING_HAS_ERRORED,e.message))}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function H(e){return l.a.createElement(T.a,{bg:"danger",className:"text-center p-0"},l.a.createElement(T.a.Body,null,e.msg))}function P(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users.fetchStatus})),n=Object(d.c)((function(e){return e.userTable.usernameFilterWord})),r=Object(d.c)((function(e){return e.userTable.sortType})),i=Object(c.useState)(""),s=Object(_.a)(i,2),u=s[0],E=s[1],m=Object(c.useState)("ASC"),f=Object(_.a)(m,2),p=f[0],h=f[1];return Object(c.useEffect)((function(){E(n),r===a.ASCENDING&&h("ASC"),r===a.DESCENDING&&h("DESC")})),l.a.createElement("div",null,t===o.FETCHING_HAS_ERRORED?l.a.createElement(H,{msg:"Fetch Error"}):"",l.a.createElement(T.a,{bg:"light"},l.a.createElement(T.a.Header,null,"Menu"),l.a.createElement(T.a.Body,null,l.a.createElement(I.a,null,l.a.createElement(I.a.Row,{className:"align-items-end"},l.a.createElement(R.a,{md:"auto",xs:"12"},l.a.createElement(I.a.Label,null,"Filter:"),l.a.createElement(I.a.Control,{type:"text",placeholder:"username",value:u,onChange:function(t){return E(t.target.value),e({type:"USER_TABLE_FILTER_ACTION",usernameFilterWord:t.target.value})}})),l.a.createElement(R.a,{md:"auto",xs:"7"},l.a.createElement(I.a.Label,null,"Sort:"),l.a.createElement(I.a.Control,{as:"select",className:"mr-sm-2",custom:!0,value:p,onChange:function(t){return h(t.target.value),function(t){switch(t){case"ASC":return e(k(a.ASCENDING));case"DESC":return e(k(a.DESCENDING));default:return e(k(a.ASCENDING))}}(t.target.value)}},l.a.createElement("option",{value:"ASC"},"Ascending"),l.a.createElement("option",{value:"DESC"},"Descending"))),l.a.createElement(R.a,{md:"auto",className:"p-xs-auto",xs:"4"},t===o.FETCHING_IN_PROGRESS?l.a.createElement(b.a,{variant:"primary",disabled:!0},l.a.createElement(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):l.a.createElement(b.a,{onClick:function(){return e(W())}},"Refresh")))))))}var B=n(78),M=n(33);function J(){var e=Object(d.c)((function(e){return e.users.users})),t=Object(d.c)((function(e){return e.userTable.sortType})),n=Object(d.c)((function(e){return e.userTable.usernameFilterWord}));return l.a.createElement(B.a,{variant:"dark",className:Object(M.b)(z.wordWrap),responsive:!0,bordered:!0,hover:!0,size:"sm"},l.a.createElement("thead",{className:Object(M.b)(z.noWrap)},l.a.createElement("tr",null,l.a.createElement("th",null,"id"),l.a.createElement("th",null,"Username"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Password"),l.a.createElement("th",null,"Is Active"),l.a.createElement("th",null,"Last Login"),l.a.createElement("th",null,"Is Superuser"))),l.a.createElement("tbody",null,e.sort((function(e,n){var r=function(e,t){return e.id>t.id?1:e.id<t.id?-1:0};switch(t){case a.ASCENDING:return r(e,n);case a.DESCENDING:return-1*r(e,n)}})).filter((function(e){var t,a=new RegExp(".*".concat(n,".*"));return t=e,a.test(t.username)})).map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",{style:{minWidth:"40px"}},e.id),l.a.createElement("td",{style:{minWidth:"120px"}},e.username),l.a.createElement("td",{style:{minWidth:"120px"}},e.first_name),l.a.createElement("td",{style:{minWidth:"150px"}},e.last_name),l.a.createElement("td",{style:{minWidth:"50px"}},e.password),l.a.createElement("td",{style:{minWidth:"74px"}},e.is_active?"true":"false"),l.a.createElement("td",{style:{minWidth:"100px"}},e.last_login),l.a.createElement("td",{style:{minWidth:"74px"}},e.is_superuser?"true":"false"))}))))}var z=M.a.create({wordWrap:{wordBreak:"break-all"},noWrap:{whiteSpace:"nowrap"}});function Y(){var e=Object(d.c)((function(e){return e.login.loginStatus}));return Object(d.b)()(W()),l.a.createElement("div",null,l.a.createElement(O.a,{className:"min-vh-100 m-auto align-items-center"},e===r.LOGIN_SUCCESSFUL?l.a.createElement("div",null,l.a.createElement(P,null),l.a.createElement(J,null)):l.a.createElement(v.c,{to:"/login"})))}var $=n(79);function q(){var e=Object(c.useState)(""),t=Object(_.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),i=Object(_.a)(o,2),s=i[0],u=i[1],E=Object(c.useState)(!1),m=Object(_.a)(E,2),p=m[0],h=m[1],g=Object(d.c)((function(e){return e.login.loginStatus})),S=Object(d.b)();return l.a.createElement(O.a,{className:"min-vh-100 m-auto align-items-center"},l.a.createElement(N.a,null,l.a.createElement($.a,null,l.a.createElement(R.a,{className:"col-md-3 col-xl-4"}),l.a.createElement(R.a,{md:!0},g===r.LOGIN_SUCCESSFUL?l.a.createElement(v.c,{to:"/users"}):l.a.createElement(I.a,{onSubmit:function(e){e.preventDefault(),S(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(y.a)(x.a.mark((function a(o){var c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U();case 2:return o(L(r.LOGIN_IN_PROGRESS)),c={username:e,password:t},f+"/api-token-auth/",a.abrupt("return",fetch("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(c)}).then((function(e){if(!e.ok)throw o(L(r.LOGIN_HAS_ERRORED,e.statusText)),new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){return A("token",e.token,n?{"max-age":Date.now()+2592e3}:{}),o(L(r.LOGIN_SUCCESSFUL)),e})).catch((function(e){return o(L(r.LOGIN_HAS_ERRORED,e.statusText))})));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(n,s,p))}},l.a.createElement(I.a.Group,{controlId:"formBasicEmail"},l.a.createElement(I.a.Label,null,"Login"),l.a.createElement(I.a.Control,{type:"text",placeholder:"Enter login",onChange:function(e){return a(e.target.value)}})),l.a.createElement(I.a.Group,{controlId:"formBasicPassword"},l.a.createElement(I.a.Label,null,"Password"),l.a.createElement(I.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}})),l.a.createElement(I.a.Group,{controlId:"formBasicCheckbox"},l.a.createElement(I.a.Check,{onChange:function(e){return h(e.target.checked)},type:"checkbox",label:"Check me out"})),l.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit"))),l.a.createElement(R.a,{className:"col-md-3 col-xl-4"}))))}function K(){var e=Object(d.b)();return Object(c.useEffect)((function(){e(U())})),l.a.createElement(v.c,{exact:!0,to:"/"})}var Q=n(54),V=n(17),X={loginStatus:r.NOT_LOGGED_IN,loginErrorMsg:"",remember:!1},Z={users:[],fetchStatus:o.NOT_FETCHED,fetchErrorMsg:""},ee={sortType:a.ASCENDING,usernameFilterWord:""};var te=n(55),ne=Object(V.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ACTION":return Object(D.a)(Object(D.a)({},e),{},{loginStatus:t.loginStatus,loginErrorMsg:t.loginErrorMsg});case"REMEMBER_ME_ACTION":return Object(D.a)(Object(D.a)({},e),{},{remember:t.remember});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_ACTION":return Object(D.a)(Object(D.a)({},e),{},{users:t.users,fetchStatus:t.fetchStatus});default:return e}},userTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_TABLE_FILTER_ACTION":return Object(D.a)(Object(D.a)({},e),{},{usernameFilterWord:t.usernameFilterWord});case"USER_TABLE_SORT_TYPE_ACTION":return Object(D.a)(Object(D.a)({},e),{},{sortType:t.sortType});default:return e}}}),ae=[function(e){return function(t){return function(n){var a=t(n);return localStorage["redux-store"]=JSON.stringify(e.getState()),a}}},function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(),a}}},te.a];var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(V.createStore)(ne,localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):e,Object(Q.composeWithDevTools)(V.applyMiddleware.apply(void 0,ae)))}();var oe=function(){return l.a.createElement(d.a,{store:re},l.a.createElement(S.BrowserRouter,{basename:"/Empha-TestTask"},l.a.createElement(g,null),l.a.createElement(v.g,null,l.a.createElement(v.d,{exact:!0,path:"/"},l.a.createElement(C,null)),l.a.createElement(v.d,{exact:!0,path:"/login"},l.a.createElement(q,null)),l.a.createElement(v.d,{exact:!0,path:"/users"},l.a.createElement(Y,null)),l.a.createElement(v.d,{exact:!0,path:"/logout"},l.a.createElement(K,null)))))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(oe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Empha-TestTask",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Empha-TestTask","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):le(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):le(t,e)}))}}()}},[[56,1,2]]]);
//# sourceMappingURL=main.e1ba2da8.chunk.js.map