(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{54:function(e,t,n){e.exports=n.p+"static/media/logo.d458a76b.svg"},65:function(e,t,n){e.exports=n(81)},70:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),l=n.n(c),i=n(15),u=n.n(i),s=(n(70),n(71),n(93)),E=n(94),m=n(92),f=n(33),d=n(7),h="https://emphasoft-test-assignment.herokuapp.com";!function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(a||(a={})),function(e){e.NOT_LOGGED_IN="NOT_LOGGED_IN",e.LOGIN_IN_PROGRESS="LOGIN_IN_PROGRESS",e.LOGIN_HAS_ERRORED="LOGIN_HAS_ERRORED",e.LOGIN_SUCCESSFUL="LOGIN_SUCCESSFUL"}(r||(r={})),function(e){e.NOT_FETCHED="NOT_FETCHED",e.FETCHING_IN_PROGRESS="FETCHING_IN_PROGRESS",e.FETCHING_HAS_ERRORED="FETCHING_HAS_ERRORED",e.FETCHED_SUCCESSFUL="FETCHED_SUCCESSFUL"}(o||(o={}));var p=n(54),g=n.n(p);function S(){var e=Object(d.c)((function(e){return e.login.loginStatus}));return l.a.createElement(s.a,{bg:"dark",variant:"dark",expand:"md"},l.a.createElement(f.LinkContainer,{to:"/",exact:!0},l.a.createElement(s.a.Brand,{href:"/"},l.a.createElement("img",{src:g.a,width:"150",height:"30",className:"d-inline-block align-top",alt:"React Bootstrap logo"}))),l.a.createElement(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(E.a,{className:"mr-auto"},l.a.createElement(f.LinkContainer,{to:"/users"},l.a.createElement(E.a.Link,{href:"#link"},"Users List")),l.a.createElement(m.a,{title:"Dropdown",id:"basic-nav-dropdown"},l.a.createElement(m.a.Item,{href:"#action/3.1"},"Action"),l.a.createElement(m.a.Item,{href:"#action/3.2"},"Another action"),l.a.createElement(m.a.Item,{href:"#action/3.3"},"Something"),l.a.createElement(m.a.Divider,null),l.a.createElement(m.a.Item,{href:"#action/3.4"},"Separated link"))),l.a.createElement(E.a,{className:"justify-content-end"},e===r.LOGIN_SUCCESSFUL?l.a.createElement(f.LinkContainer,{to:"/logout"},l.a.createElement(E.a.Link,{href:"#login"},"Logout")):l.a.createElement(f.LinkContainer,{to:"/login"},l.a.createElement(E.a.Link,{href:"#login"},"Login")))))}var v=n(27),O=n(6),N=n(86),b=n(87);function C(){return l.a.createElement(N.a,{className:"min-vh-100 m-auto align-items-center"},l.a.createElement(b.a,{className:"text-center"},l.a.createElement("h1",{className:"display-3"},"Welcome To My SPA"),l.a.createElement("h2",{className:"lead"},"You can log in and see the list of users from the emphasoft server")))}var _=n(22),T=n(95),I=n(91),R=n(60),w=n(59),L=n(88);function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:"LOGIN_ACTION",loginStatus:e,loginErrorMsg:t}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"SET_USERS_ACTION",users:e,fetchStatus:t,fetchErrorMsg:n}}function j(e){return{type:"USER_TABLE_SORT_TYPE_ACTION",sortType:e}}var D=n(23),x=n.n(D),A=n(43),y=n(13);function F(e,t,n){(n=Object(y.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in n){a+="; "+r;var o=n[r];!0!==o&&(a+="="+o)}document.cookie=a}function U(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var H=function(){return function(){var e=Object(A.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G(r.NOT_LOGGED_IN)),F("token","",{"max-age":-1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){return function(){var e=Object(A.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(k([],o.NOT_FETCHED)),U("token")){e.next=3;break}return e.abrupt("return",t(H()));case 3:return n=U("token"),t(k([],o.FETCHING_IN_PROGRESS)),a="".concat(h,"/api/v1/users/"),e.next=8,fetch(a,{headers:{Authorization:"Token ".concat(n)}}).then((function(e){if(!e.ok)throw t(k([],o.FETCHING_HAS_ERRORED,e.statusText)),new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){return t(k(e,o.FETCHED_SUCCESSFUL))})).catch((function(e){t(k([],o.FETCHING_HAS_ERRORED,e.message))}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function W(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users.fetchStatus})),n=Object(d.c)((function(e){return e.userTable.usernameFilterWord})),r=Object(d.c)((function(e){return e.userTable.sortType})),i=Object(c.useState)(""),u=Object(_.a)(i,2),s=u[0],E=u[1],m=Object(c.useState)("ASC"),f=Object(_.a)(m,2),h=f[0],p=f[1];return Object(c.useEffect)((function(){E(n),r===a.ASCENDING&&p("ASC"),r===a.DESCENDING&&p("DESC")})),l.a.createElement("div",null,l.a.createElement(T.a,{bg:"light"},l.a.createElement(T.a.Header,null,"Menu"),l.a.createElement(T.a.Body,null,l.a.createElement(I.a,null,l.a.createElement(I.a.Row,{className:"align-items-end"},l.a.createElement(R.a,{md:"auto",xs:"12"},l.a.createElement(I.a.Label,null,"Filter:"),l.a.createElement(I.a.Control,{type:"text",placeholder:"username",value:s,onChange:function(t){return E(t.target.value),e({type:"USER_TABLE_FILTER_ACTION",usernameFilterWord:t.target.value})}})),l.a.createElement(R.a,{md:"auto",xs:"8"},l.a.createElement(I.a.Label,null,"Sort:"),l.a.createElement(I.a.Control,{as:"select",className:"mr-sm-2",custom:!0,value:h,onChange:function(t){return p(t.target.value),function(t){switch(t){case"ASC":return e(j(a.ASCENDING));case"DESC":return e(j(a.DESCENDING));default:return e(j(a.ASCENDING))}}(t.target.value)}},l.a.createElement("option",{value:"ASC"},"Ascending"),l.a.createElement("option",{value:"DESC"},"Descending"))),l.a.createElement(R.a,{md:"auto",xs:"4"},t===o.FETCHING_IN_PROGRESS?l.a.createElement(w.a,{variant:"primary",disabled:!0},l.a.createElement(L.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."):l.a.createElement(R.a,{xs:"auto"},l.a.createElement(w.a,{onClick:function(){return e(P())}},"Refresh"))))))))}var B=n(89);function M(){var e=Object(d.c)((function(e){return e.users.users})),t=Object(d.c)((function(e){return e.userTable.sortType})),n=Object(d.c)((function(e){return e.userTable.usernameFilterWord}));return l.a.createElement(B.a,{variant:"dark",className:"",responsive:!0,bordered:!0,hover:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"id"),l.a.createElement("th",null,"Username"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Password"),l.a.createElement("th",null,"Is Active"),l.a.createElement("th",null,"Last Login"),l.a.createElement("th",null,"Is Superuser"))),l.a.createElement("tbody",null,e.sort((function(e,n){var r=function(e,t){return e.id>t.id?1:e.id<t.id?-1:0};switch(t){case a.ASCENDING:return r(e,n);case a.DESCENDING:return-1*r(e,n)}})).filter((function(e){var t,a=new RegExp(".*".concat(n,".*"));return t=e,a.test(t.username)})).map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.first_name),l.a.createElement("td",null,e.last_name),l.a.createElement("td",null,e.password),l.a.createElement("td",null,e.is_active?"true":"false"),l.a.createElement("td",null,e.last_login),l.a.createElement("td",null,e.is_superuser?"true":"false"))}))))}function J(){var e=Object(d.c)((function(e){return e.login.loginStatus}));return Object(d.b)()(P()),l.a.createElement("div",null,l.a.createElement(N.a,{className:"min-vh-100 align-items-center"},l.a.createElement(b.a,null,e===r.LOGIN_SUCCESSFUL?l.a.createElement("div",null,l.a.createElement(W,null),l.a.createElement(M,null)):l.a.createElement(O.c,{to:"/login"}))))}var z=n(90);function Y(){var e=Object(c.useState)(""),t=Object(_.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),i=Object(_.a)(o,2),u=i[0],s=i[1],E=Object(c.useState)(!1),m=Object(_.a)(E,2),f=m[0],p=m[1],g=Object(d.c)((function(e){return e.login.loginStatus})),S=Object(d.b)();return l.a.createElement(N.a,{className:"min-vh-100 m-auto align-items-center"},l.a.createElement(b.a,null,l.a.createElement(z.a,null,l.a.createElement(R.a,{className:"col-md-3 col-xl-4"}),l.a.createElement(R.a,{md:!0},g===r.LOGIN_SUCCESSFUL?l.a.createElement(O.c,{to:"/users"}):l.a.createElement(I.a,{onSubmit:function(e){e.preventDefault(),S(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(A.a)(x.a.mark((function a(o){var c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,H();case 2:return o(G(r.LOGIN_IN_PROGRESS)),c={username:e,password:t},h+"/api-token-auth/",a.abrupt("return",fetch("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(c)}).then((function(e){if(!e.ok)throw o(G(r.LOGIN_HAS_ERRORED,e.statusText)),new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){return F("token",e.token,n?{"max-age":Date.now()+2592e3}:{}),o(G(r.LOGIN_SUCCESSFUL)),e})).catch((function(e){return o(G(r.LOGIN_HAS_ERRORED,e.statusText))})));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(n,u,f))}},l.a.createElement(I.a.Group,{controlId:"formBasicEmail"},l.a.createElement(I.a.Label,null,"Login"),l.a.createElement(I.a.Control,{type:"text",placeholder:"Enter login",onChange:function(e){return a(e.target.value)}})),l.a.createElement(I.a.Group,{controlId:"formBasicPassword"},l.a.createElement(I.a.Label,null,"Password"),l.a.createElement(I.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return s(e.target.value)}})),l.a.createElement(I.a.Group,{controlId:"formBasicCheckbox"},l.a.createElement(I.a.Check,{onChange:function(e){return p(e.target.checked)},type:"checkbox",label:"Check me out"})),l.a.createElement(w.a,{variant:"primary",type:"submit"},"Submit"))),l.a.createElement(R.a,{className:"col-md-3 col-xl-4"}))))}function $(){var e=Object(d.b)();return Object(c.useEffect)((function(){e(H())})),l.a.createElement(O.c,{exact:!0,to:"/"})}var q=n(61),K=n(21),Q={loginStatus:r.NOT_LOGGED_IN,loginErrorMsg:"",remember:!1},V={users:[],fetchStatus:o.NOT_FETCHED,fetchErrorMsg:""},X={sortType:a.ASCENDING,usernameFilterWord:""};var Z=n(62),ee=Object(K.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ACTION":return Object(y.a)(Object(y.a)({},e),{},{loginStatus:t.loginStatus,loginErrorMsg:t.loginErrorMsg});case"REMEMBER_ME_ACTION":return Object(y.a)(Object(y.a)({},e),{},{remember:t.remember});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_ACTION":return Object(y.a)(Object(y.a)({},e),{},{users:t.users,fetchStatus:t.fetchStatus});default:return e}},userTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_TABLE_FILTER_ACTION":return Object(y.a)(Object(y.a)({},e),{},{usernameFilterWord:t.usernameFilterWord});case"USER_TABLE_SORT_TYPE_ACTION":return Object(y.a)(Object(y.a)({},e),{},{sortType:t.sortType});default:return e}}}),te=[function(e){return function(t){return function(n){var a=t(n);return localStorage["redux-store"]=JSON.stringify(e.getState()),a}}},function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(),a}}},Z.a];var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(K.createStore)(ee,localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):e,Object(q.composeWithDevTools)(K.applyMiddleware.apply(void 0,te)))}();var ae=function(){return l.a.createElement(d.a,{store:ne},l.a.createElement(v.BrowserRouter,{basename:"/Empha-TestTask"},l.a.createElement(S,null),l.a.createElement(O.g,null,l.a.createElement(O.d,{exact:!0,path:"/"},l.a.createElement(C,null)),l.a.createElement(O.d,{exact:!0,path:"/login"},l.a.createElement(Y,null)),l.a.createElement(O.d,{exact:!0,path:"/users"},l.a.createElement(J,null)),l.a.createElement(O.d,{exact:!0,path:"/logout"},l.a.createElement($,null)))))},re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ae,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Empha-TestTask",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Empha-TestTask","/service-worker.js");re?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):oe(t,e)}))}}()}},[[65,1,2]]]);
//# sourceMappingURL=main.23360cc5.chunk.js.map